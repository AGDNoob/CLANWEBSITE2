<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dein Clan Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
</head>
<body>

    <div class="mobile-header">
        <button id="hamburger-btn">‚ò∞</button>
        <h3>Clan Dashboard</h3>
    </div>
    <div id="mobile-overlay"></div>

    <div class="app-container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <h3>Clan Dashboard</h3>
            </div>
            <ul class="sidebar-nav">
                <li><a href="#" class="nav-link active" data-target="page-home">üè† Startseite</a></li>
                <li><a href="#" class="nav-link" data-target="page-clan-info">üõ°Ô∏è Clan-Infos</a></li>
                <li><a href="#" class="nav-link" data-target="page-analytics">üìä Clan-Statistiken</a></li>
                <li><a href="#" class="nav-link" data-target="page-war-center">‚öîÔ∏è Kriegszentrale</a></li>
                <li><a href="#" class="nav-link" data-target="page-capital">üèîÔ∏è Clan-Hauptstadt</a></li>
                <li><a href="#" class="nav-link" data-target="page-cwl">üèÜ CWL-Zentrale</a></li>
                <li><a href="#" class="nav-link" data-target="page-lab">üî¨ Heldenlevel</a></li>
                <li><a href="#" class="nav-link" data-target="page-credits">üìú Credits</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <section id="page-home" class="page active">
                <h1>Willkommen auf dem Clan Dashboard!</h1>
                <p>W√§hle links ein Werkzeug aus, um die Live-Daten zu sehen.</p>
                <p>Alle Daten werden direkt von der offiziellen Clash of Clans API geladen.</p>
            </section>

            <section id="page-clan-info" class="page">
                <div id="clan-info-master-view">
                    <header id="clan-header">
                        <h1 id="clan-name">L√§dt...</h1>
                        <p id="clan-description">...</p>
                        <div id="clan-stats"></div>
                    </header>
                    <div id="member-list-container" class="card-grid"></div>
                </div>
                <div id="player-profile-view" class="hidden">
                    <button id="profile-back-button">&larr; Zur√ºck zur Liste</button>
                    <div class="profile-card">
                        <div class="profile-header">
                            <img id="profile-league-icon" src="" alt="Liga-Icon">
                            <div>
                                <h1 id="profile-player-name">Spielername</h1>
                                <span id="profile-player-tag">#TAG</span>
                            </div>
                        </div>
                        <div class="profile-stats">
                            <div class="stat-item"><span>Level</span><span id="profile-level">0</span></div>
                            <div class="stat-item"><span>Rathaus</span><span id="profile-th-level">0</span></div>
                            <div class="stat-item"><span>Troph√§en</span><span id="profile-trophies">0</span></div>
                            <div class="stat-item"><span>Kriegssterne</span><span id="profile-war-stars">0</span></div>
                            <div class="stat-item"><span>Rolle im Clan</span><span id="profile-role">Mitglied</span></div>
                            <div class="stat-item"><span>Spenden</span><span id="profile-donations">0</span></div>
                            <div class="stat-item"><span>Erhalten</span><span id="profile-donations-received">0</span></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="page-analytics" class="page">
                <h1>Clan-Statistiken</h1>
                <div class="analytics-grid">
                    <div class="stats-box">
                        <h3>Rathaus-Verteilung</h3>
                        <div class="chart-container-half">
                            <canvas id="th-distribution-chart"></canvas>
                        </div>
                    </div>
                    <div class="stats-box">
                        <h3>Liga-Verteilung</h3>
                        <div class="chart-container-half">
                            <canvas id="league-distribution-chart"></canvas>
                        </div>
                    </div>
                    <div class="stats-box full-width">
                        <h3>Top 10 Spender</h3>
                        <table class="stats-table">
                            <thead><tr><th>#</th><th>Spieler</th><th>Gespendet</th><th>Erhalten</th><th>Ratio</th></tr></thead>
                            <tbody id="donation-stats-body"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="page-war-center" class="page">
                <h1>Kriegszentrale</h1>
                <div id="current-war-master-view">
                    <div class="dashboard-box" id="current-war-box">
                        <h2>Aktueller Clankrieg</h2>
                        <p id="not-in-war-message" class="hidden">Wir sind aktuell in keinem Clankrieg.</p>
                        <div id="current-war-dashboard"></div>
                    </div>
                </div>
                <div id="current-war-detail-view" class="hidden">
                    <button id="current-war-detail-back-button">&larr; Zur√ºck zur √úbersicht</button>
                    <div class="detailed-war-clans">
                        <div id="detailed-war-our-clan"></div>
                        <div id="detailed-war-opponent-clan"></div>
                    </div>
                </div>
                <div class="dashboard-box accordion" id="warlog-accordion">
                    <h2 class="accordion-header">Kriegsprotokoll (zum Ausklappen) <span class="accordion-arrow">‚ñº</span></h2>
                    <div id="warlog-accordion-content" class="accordion-content">
                        <p>Kriegsprotokoll wird geladen...</p>
                    </div>
                </div>
                <div class="dashboard-box" id="war-organizer-view">
                    <h2>Automatischer Kriegsplan</h2>
                    <p>Hier sind die empfohlenen Angriffs-Ziele basierend auf dem Spiegel-Prinzip. Der Plan wird generiert, sobald die Kriegsdaten geladen sind.</p>
                    <div id="war-plan-container">
                        </div>
                </div>
            </section>

            <section id="page-capital" class="page">
                <h1>Clan-Hauptstadt</h1>
                <div class="dashboard-box">
                    <h2>Beuteverlauf der letzten Raids</h2>
                    <div class="chart-container">
                        <canvas id="capital-chart"></canvas>
                    </div>
                </div>
                <div id="capital-raids-container" class="card-grid">
                    <p>Daten der Hauptstadt-Raids werden geladen...</p>
                </div>
            </section>
            
            <section id="page-cwl" class="page">
    <h1>CWL Bonus-Rechner</h1>

    <div class="dashboard-box">
        <p><strong>Info zum Bonus-Rechner:</strong></p>
        <p>Da die offizielle Spiel-API keine zuverl√§ssigen Live-Daten liefert, wurde die automatische Zentrale entfernt. Dieser Rechner funktioniert jetzt √ºber <strong>manuelle Eingabe</strong>.</p>
        <p>F√ºgt einfach jeden Angriff hinzu, den ihr werten wollt, und klickt am Ende auf "Punkte berechnen"!</p>
    </div>

    <div id="cwl-content">
        <div class="dashboard-box">
            <h2>Dateneingabe</h2>
            <p>F√ºge hier f√ºr jeden Spieler alle 7 Angriffe hinzu.</p>
            <div class="lab-table-container"> <table class="stats-table" id="manual-attacks-table">
                    <thead>
                        <tr>
                            <th>Spielername</th>
                            <th>Eigenes RH</th>
                            <th>Gegner RH</th>
                            <th>Sterne ‚≠ê</th>
                            <th>Zerst√∂rung %</th>
                            <th>Aktion</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>
            <div style="margin-top: 1rem; display: flex; gap: 1rem;">
                <button id="add-attack-row-btn" class="cta-button">Angriff hinzuf√ºgen</button>
                <button id="clear-attacks-btn">Eingaben l√∂schen</button>
            </div>
        </div>

        <div class="dashboard-box" id="cwl-bonus-calculator-view">
            <h2>Einstellungen f√ºr die Punktevergabe</h2>
            <div class="bonus-rechner-grid">
                <div class="settings-box">
                    <h3>Punkte f√ºr RH-Differenz</h3>
                    <div class="setting-item"><label>RH+2</label><input type="number" id="p-ell-rh-p2" value="3"></div>
                    <div class="setting-item"><label>RH+1</label><input type="number" id="p-ell-rh-p1" value="2"></div>
                    <div class="setting-item"><label>RH=0</label><input type="number" id="p-ell-rh-0" value="1"></div>
                    <div class="setting-item"><label>RH-1</label><input type="number" id="p-ell-rh-m1" value="0"></div>
                    <div class="setting-item"><label>RH-2</label><input type="number" id="p-ell-rh-m2" value="-1"></div>
                </div>
                <div class="settings-box">
                    <h3>Punkte f√ºr 3 Sterne</h3>
                    <div class="setting-item"><label>3‚≠ê vs RH+2</label><input type="number" id="p-atk-3s-rh-p2" value="6"></div>
                    <div class="setting-item"><label>3‚≠ê vs RH=0</label><input type="number" id="p-atk-3s-rh-0" value="4"></div>
                    <div class="setting-item"><label>3‚≠ê vs RH-2</label><input type="number" id="p-atk-3s-rh-m2" value="2"></div>
                </div>
                 <div class="settings-box">
                    <h3>Punkte f√ºr 2 Sterne</h3>
                    <div class="setting-item"><label>2‚≠ê (90%+)</label><input type="number" id="p-atk-2s-90" value="4"></div>
                    <div class="setting-item"><label>2‚≠ê (80-89%)</label><input type="number" id="p-atk-2s-80-89" value="3"></div>
                    <div class="setting-item"><label>2‚≠ê (50-79%)</label><input type="number" id="p-atk-2s-50-79" value="2"></div>
                </div>
                <div class="settings-box">
                    <h3>Punkte f√ºr 1 Stern</h3>
                    <div class="setting-item"><label>1‚≠ê (90-99%)</label><input type="number" id="p-atk-1s-90-99" value="2"></div>
                    <div class="setting-item"><label>1‚≠ê (50-89%)</label><input type="number" id="p-atk-1s-50-89" value="1"></div>
                </div>
                 <div class="settings-box">
                    <h3>Bonuspunkte</h3>
                    <div class="setting-item"><label>Aktivit√§t</label><input type="number" id="p-bonus-aktiv" value="1"></div>
                    <div class="setting-item"><label>100% Bonus</label><input type="number" id="p-bonus-100" value="1"></div>
                    <div class="setting-item"><label>Mutbonus (RH+3)</label><input type="number" id="p-bonus-mut" value="1"></div>
                    <div class="setting-item"><label>Extra Mut (30-49%)</label><input type="number" id="p-bonus-mut-extra" value="2"></div>
                    <div class="setting-item"><label>Alle 7 Angriffe</label><input type="number" id="p-bonus-alle-7" value="2"></div>
                </div>
            </div>
            <button id="calculate-bonus-btn" class="cta-button">Punkte aus manueller Eingabe berechnen!</button>
        </div>

        <div class="dashboard-box hidden" id="cwl-bonus-results-view">
            <button id="bonus-rechner-back-button">&larr; Zur√ºck zum Rechner</button>
            <h2>üèÜ Finale Bonus-Rangliste</h2>
            <div class="bonus-results-grid">
                <table class="stats-table">
                    <thead><tr><th>#</th><th>Spieler</th><th>Punkte</th></tr></thead>
                    <tbody id="bonus-results-table-body"></tbody>
                </table>
                <div class="chart-container">
                    <canvas id="bonus-chart"></canvas>
                </div>
            </div>
        </div>
    </div>
</section>

            <section id="page-lab" class="page">
                <h1>üî¨ Heldenlevel</h1>
                <p>Hier siehst du eine √úbersicht der Helden aller Mitglieder. Daten werden live geladen, dies kann einen Moment dauern.</p>
                
                <div id="lab-loading-state" class="loading-state">
                    <div class="spinner"></div>
                    <p>Lade Spielerdaten...</p>
                </div>

                <div id="lab-content-container" class="hidden">
                    <div class="dashboard-box">
                        <h2>Helden-Level</h2>
                        <div id="hero-table-container" class="lab-table-container">
                            </div>
                    </div>
                </div>
            </section>
            
            <section id="page-credits" class="page">
                <div class="credits-content">
                    <h1>Credits</h1>
                    <p class="made-by">Code & Website von AGDNoob ‚ù§Ô∏è</p>
                    <p>Dieses riesige Projekt wurde mit Python, Flask und der offiziellen Clash of Clans API umgesetzt.</p>
                </div>
            </section>
        </main>
    </div>
</body>
</html>


<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clan Dashboard</title>

    <!-- Chart.js f√ºr Diagramme -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- Frontend-Module -->
    <script src="api.js" defer></script>
    <script src="render.js" defer></script>
    <script src="warplanner.js" defer></script>
    <script src="bonus.js" defer></script>
    <script src="main.js" defer></script>
</head>
<body>

    <!-- Mobile Header -->
    <div class="mobile-header">
        <button id="hamburger-btn">‚ò∞</button>
        <h3>Clan Dashboard</h3>
    </div>
    <div id="mobile-overlay"></div>

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h3>Clan Dashboard</h3>
            </div>
            <ul class="sidebar-nav">
                <li><a href="#" class="nav-link active" data-target="page-home">üè† Startseite</a></li>
                <li><a href="#" class="nav-link" data-target="page-clan-info">üõ°Ô∏è Clan-Infos</a></li>
                <li><a href="#" class="nav-link" data-target="page-analytics">üìä Statistiken</a></li>
                <li><a href="#" class="nav-link" data-target="page-war-center">‚öîÔ∏è Kriegszentrale</a></li>
                <li><a href="#" class="nav-link" data-target="page-capital">üèîÔ∏è Hauptstadt</a></li>
                <li><a href="#" class="nav-link" data-target="page-cwl">üèÜ CWL-Rechner</a></li>
                <li><a href="#" class="nav-link" data-target="page-lab">üî¨ Heldenlevel</a></li>
                <li><a href="#" class="nav-link" data-target="page-credits">üìú Credits</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            
            <!-- Startseite -->
            <section id="page-home" class="page active">
                <h1>Willkommen!</h1>
                <p>W√§hle links ein Modul, um Live-Daten zu sehen.</p>
            </section>

            <!-- Clan Infos -->
            <section id="page-clan-info" class="page">
                <div id="clan-info-master-view">
                    <header id="clan-header">
                        <h1 id="clan-name">L√§dt...</h1>
                        <p id="clan-description">...</p>
                        <div id="clan-stats"></div>
                    </header>
                    <div id="member-list-container" class="card-grid"></div>
                </div>

                <!-- Spielerprofil -->
                <div id="player-profile-view" class="hidden">
                    <button id="profile-back-button">&larr; Zur√ºck</button>
                    <div class="profile-card">
                        <div class="profile-header">
                            <img id="profile-league-icon" src="" alt="Liga-Icon">
                            <div>
                                <h1 id="profile-player-name">Spielername</h1>
                                <span id="profile-player-tag">#TAG</span>
                            </div>
                        </div>
                        <div class="profile-stats">
                            <div class="stat-item"><span>Level</span><span id="profile-level">0</span></div>
                            <div class="stat-item"><span>Rathaus</span><span id="profile-th-level">0</span></div>
                            <div class="stat-item"><span>Troph√§en</span><span id="profile-trophies">0</span></div>
                            <div class="stat-item"><span>Kriegssterne</span><span id="profile-war-stars">0</span></div>
                            <div class="stat-item"><span>Rolle</span><span id="profile-role">Mitglied</span></div>
                            <div class="stat-item"><span>Spenden</span><span id="profile-donations">0</span></div>
                            <div class="stat-item"><span>Erhalten</span><span id="profile-donations-received">0</span></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Statistiken -->
            <section id="page-analytics" class="page">
                <h1>Clan-Statistiken</h1>
                <div class="analytics-grid">
                    <div class="stats-box">
                        <h3>Rathaus-Verteilung</h3>
                        <div class="chart-container-half">
                            <canvas id="th-distribution-chart"></canvas>
                        </div>
                    </div>
                    <div class="stats-box">
                        <h3>Liga-Verteilung</h3>
                        <div class="chart-container-half">
                            <canvas id="league-distribution-chart"></canvas>
                        </div>
                    </div>
                    <div class="stats-box full-width">
                        <h3>Top 10 Spender</h3>
                        <table class="stats-table">
                            <thead><tr><th>#</th><th>Spieler</th><th>Gespendet</th><th>Erhalten</th><th>Ratio</th></tr></thead>
                            <tbody id="donation-stats-body"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Kriegszentrale -->
            <section id="page-war-center" class="page">
                <h1>Kriegszentrale</h1>
                <div id="current-war-master-view">
                    <div class="dashboard-box" id="current-war-box">
                        <h2>Aktueller Krieg</h2>
                        <p id="not-in-war-message" class="hidden">Aktuell kein Krieg.</p>
                        <div id="current-war-dashboard"></div>
                    </div>
                </div>
                <div id="current-war-detail-view" class="hidden">
                    <button id="current-war-detail-back-button">&larr; Zur√ºck</button>
                    <div class="detailed-war-clans">
                        <div id="detailed-war-our-clan"></div>
                        <div id="detailed-war-opponent-clan"></div>
                    </div>
                </div>
                <div class="dashboard-box accordion" id="warlog-accordion">
                    <h2 class="accordion-header">Kriegsprotokoll <span class="accordion-arrow">‚ñº</span></h2>
                    <div id="warlog-accordion-content" class="accordion-content">
                        <p>Kriegsprotokoll wird geladen...</p>
                    </div>
                </div>
                <div class="dashboard-box" id="war-organizer-view">
                    <h2>Automatischer Kriegsplan</h2>
                    <div id="war-plan-container"></div>
                </div>
            </section>

            <!-- Hauptstadt -->
            <section id="page-capital" class="page">
                <h1>Clan-Hauptstadt</h1>
                <div class="dashboard-box">
                    <h2>Beuteverlauf</h2>
                    <div class="chart-container">
                        <canvas id="capital-chart"></canvas>
                    </div>
                </div>
                <div id="capital-raids-container" class="card-grid"></div>
            </section>

            <!-- CWL Rechner -->
            <section id="page-cwl" class="page">
                <h1>CWL Bonus-Rechner</h1>
                <div id="cwl-content">
                    <div class="dashboard-box">
                        <h2>Neuen Spieler hinzuf√ºgen</h2>
                        <div class="add-player-form">
                            <input type="text" id="new-player-name" placeholder="Spielername">
                            <input type="number" id="new-player-th" placeholder="RH-Level">
                            <input type="number" id="new-player-attacks" placeholder="Angriffe" min="1" max="7">
                            <button id="add-player-btn" class="cta-button">Spieler hinzuf√ºgen</button>
                        </div>
                    </div>
                    <div id="player-accordion-container"></div>
                    <div class="dashboard-box" id="cwl-bonus-calculator-view">
                        <h2>Einstellungen</h2>
                        <div class="bonus-rechner-grid" id="bonus-settings"></div>
                        <div style="margin-top: 1rem; display: flex; gap: 1rem;">
                            <button id="calculate-bonus-btn" class="cta-button">Berechnen</button>
                            <button id="clear-all-btn">Zur√ºcksetzen</button>
                        </div>
                    </div>
                    <div class="dashboard-box hidden" id="cwl-bonus-results-view">
                        <button id="bonus-rechner-back-button">&larr; Zur√ºck</button>
                        <h2>üèÜ Bonus-Rangliste</h2>
                        <div class="bonus-results-grid">
                            <table class="stats-table">
                                <thead><tr><th>#</th><th>Spieler</th><th>Punkte</th></tr></thead>
                                <tbody id="bonus-results-table-body"></tbody>
                            </table>
                            <div class="chart-container">
                                <canvas id="bonus-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Heldenlevel -->
            <section id="page-lab" class="page">
                <h1>üî¨ Heldenlevel</h1>
                <div id="lab-loading-state" class="loading-state">
                    <div class="spinner"></div>
                    <p>Lade Spielerdaten...</p>
                </div>
                <div id="lab-content-container" class="hidden">
                    <div class="dashboard-box">
                        <h2>Helden-Level</h2>
                        <div id="hero-table-container" class="lab-table-container"></div>
                    </div>
                </div>
            </section>

            <!-- Credits -->
            <section id="page-credits" class="page">
                <div class="credits-content">
                    <h1>Credits</h1>
                    <p class="made-by">Code & Website von AGDNoob ‚ù§Ô∏è</p>
                    <p>Projekt mit Python, Flask & der offiziellen Clash API.</p>
                </div>
            </section>

        </main>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clan Dashboard</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h3>Magic Dragons</h3>
        <small>Clan Dashboard</small>
      </div>
      <ul class="sidebar-nav">
        <li><a href="#" data-target="page-home" class="nav-link active">Home</a></li>
        <li><a href="#" data-target="page-clan-info" class="nav-link">Clan Info</a></li>
        <li><a href="#" data-target="page-analytics" class="nav-link">Analytics</a></li>
        <li><a href="#" data-target="page-war-center" class="nav-link">War Center</a></li>
        <li><a href="#" data-target="page-capital" class="nav-link">Clan Capital</a></li>
        <li><a href="#" data-target="page-bonus" class="nav-link">Bonus Rechner</a></li>
        <li><a href="#" data-target="page-heroes" class="nav-link">Helden</a></li>
        <li><a href="#" data-target="page-cwl" class="nav-link">CWL Zentrale</a></li>
        <li><a href="#" data-target="page-credits" class="nav-link">Credits</a></li>
      </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Mobile Header -->
      <header class="mobile-header">
        <button id="hamburger-btn">☰</button>
        <h1>Clan Dashboard</h1>
      </header>

      <!-- Overlay -->
      <div id="mobile-overlay"></div>

      <!-- Home -->
      <section id="page-home" class="page active">
        <h2>Willkommen im Clan Dashboard</h2>
        <p>Hier findest du alle Infos zu Clan, Kriegen und CWL.</p>
      </section>

      <!-- Clan Info -->
      <section id="page-clan-info" class="page">
        <h2>Clan Informationen</h2>
        <div id="clan-header">
          <h1 id="clan-name">Clanname</h1>
          <p id="clan-description"></p>
          <div id="clan-stats"></div>
        </div>
        <div id="member-list-container"></div>

        <h3>Spendenstatistik</h3>
        <table class="stats-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Spieler</th>
              <th>Gespendet</th>
              <th>Erhalten</th>
              <th>Ratio</th>
            </tr>
          </thead>
          <tbody id="donation-stats-body"></tbody>
        </table>
      </section>

      <!-- Spielerprofil -->
      <section id="player-profile-view" class="page hidden">
        <h2>Spielerprofil</h2>
        <div class="profile-card card">
          <img id="profile-league-icon" src="" alt="League Icon" width="80">
          <h3 id="profile-player-name"></h3>
          <p>Tag: <span id="profile-player-tag"></span></p>
          <p>Level: <span id="profile-level"></span></p>
          <p>Rolle: <span id="profile-role"></span></p>
          <p>Trophäen: <span id="profile-trophies"></span></p>
          <p>Spenden: <span id="profile-donations"></span> / Erhalten: <span id="profile-donations-received"></span></p>
          <p>RH: <span id="profile-th-level"></span></p>
          <p>War Stars: <span id="profile-war-stars"></span></p>
        </div>
        <button onclick="
          document.getElementById('player-profile-view').classList.add('hidden');
          document.getElementById('page-clan-info').classList.remove('hidden');
        ">Zurück</button>
      </section>

      <!-- Analytics -->
      <section id="page-analytics" class="page">
        <h2>Statistiken</h2>
        <div class="analytics-grid">
          <div class="chart-container-half"><canvas id="th-distribution-chart"></canvas></div>
          <div class="chart-container-half"><canvas id="league-distribution-chart"></canvas></div>
        </div>
      </section>

      <!-- War Center -->
      <section id="page-war-center" class="page">
        <h2>Kriegszentrale</h2>
        <div id="not-in-war-message"></div>
        <div id="current-war-dashboard"></div>
        <div id="war-plan-container"></div>

        <div id="detailed-war-view">
          <div class="detailed-war-clans">
            <div id="detailed-war-our-clan"></div>
            <div id="detailed-war-opponent-clan"></div>
          </div>
        </div>

        <div id="warlog-accordion" class="accordion">
          <div class="accordion-header">
            <h3>Kriegshistorie</h3>
          </div>
          <div id="warlog-accordion-content" class="accordion-content"></div>
        </div>
      </section>

      <!-- Clan Capital -->
      <section id="page-capital" class="page">
        <h2>Clan Hauptstadt</h2>
        <div id="capital-raids-container"></div>
        <div class="chart-container"><canvas id="capital-chart"></canvas></div>
      </section>

      <!-- Bonus Rechner -->
      <section id="page-bonus" class="page">
        <h2>CWL Bonus Rechner</h2>
        <div id="bonus-settings"></div>
        <div class="bonus-rechner-grid">
          <div class="add-player-form">
            <input type="text" id="new-player-name" placeholder="Spielername">
            <input type="number" id="new-player-th" placeholder="RH">
            <input type="number" id="new-player-attacks" placeholder="Angriffe">
            <button id="add-player-btn">Hinzufügen</button>
          </div>
        </div>
        <div id="player-accordion-container" class="player-accordion-container"></div>
        <button id="calculate-bonus-btn">Berechnen</button>
        <button id="clear-all-btn">Alles löschen</button>

        <div id="cwl-bonus-results-view" class="hidden">
          <h3>Ergebnisse</h3>
          <table class="stats-table">
            <thead><tr><th>#</th><th>Spieler</th><th>Punkte</th></tr></thead>
            <tbody id="bonus-results-table-body"></tbody>
          </table>
          <div class="chart-container"><canvas id="bonus-chart"></canvas></div>
          <button id="bonus-rechner-back-button">Zurück</button>
        </div>
      </section>

      <!-- Helden -->
      <section id="page-heroes" class="page">
        <h2>Helden Übersicht</h2>
        <div id="lab-loading-state" class="hidden"></div>
        <div id="lab-content-container">
          <div id="hero-table-container" class="lab-table-container"></div>
        </div>
      </section>

      <!-- CWL Zentrale -->
      <section id="page-cwl" class="page">
        <h2>CWL Zentrale</h2>
        <div id="cwl-summary" class="card"></div>
        <div id="cwl-rounds" class="card"></div>
        <canvas id="cwl-player-stats"></canvas>
        <div id="cwl-bonus" class="card"></div>
      </section>

      <!-- Credits -->
      <section id="page-credits" class="page">
        <h2>Credits</h2>
        <p>Website und Code von ADGNoob. Dieses Megaprojekt hat sehr viel Arbeit gekostet und wurde mithilfe von Python, Flask, SQLite und der offiziellen CoC API umgesetzt ❤️</p>
      </section>
    </main>
  </div>

  <script src="api.js"></script>
  <script src="bonus.js"></script>
  <script src="render.js"></script>
  <script src="warplanner.js"></script>
  <script src="main.js"></script>
</body>
</html>

